# ä¸€æ–‡ç©è½¬Linux(NAT)ç½‘ç»œé…ç½®

## ğŸ“–ä¸‰ç§æ¨¡å¼ç®€ä»‹

 *VMWareæä¾›äº†ä¸‰ç§å·¥ä½œæ¨¡å¼ï¼Œå®ƒä»¬æ˜¯bridged(æ¡¥æ¥æ¨¡å¼)ã€NAT(ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼)å’Œhost-only(ä¸»æœºæ¨¡å¼)* 

### 1ã€ bridged(æ¡¥æ¥æ¨¡å¼)

*bridged(æ¡¥æ¥æ¨¡å¼) æ˜¯ VMWare è™šæ‹Ÿå‡ºæ¥çš„æ“ä½œç³»ç»Ÿå°±åƒæ˜¯å±€åŸŸç½‘ä¸­çš„ä¸€å°ç‹¬ç«‹çš„ä¸»æœºï¼Œå®ƒå¯ä»¥è®¿é—®ç½‘å†…ä»»ä½•ä¸€å°æœºå™¨ã€‚åœ¨æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œéœ€è¦æ‰‹å·¥ä¸ºè™šæ‹Ÿç³»ç»Ÿé…ç½®IPåœ°å€ã€å­ç½‘æ©ç ï¼Œè€Œä¸”è¿˜è¦å’Œå®¿ä¸»æœºå™¨å¤„äºåŒä¸€ç½‘æ®µï¼Œè¿™æ ·è™šæ‹Ÿç³»ç»Ÿæ‰èƒ½å’Œå®¿ä¸»æœºå™¨è¿›è¡Œé€šä¿¡ã€‚åŒæ—¶ï¼Œç”±äºè¿™ä¸ªè™šæ‹Ÿç³»ç»Ÿæ˜¯å±€åŸŸç½‘ä¸­çš„ä¸€ä¸ªç‹¬ç«‹çš„ä¸»æœºç³»ç»Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰‹å·¥é…ç½®å®ƒçš„TCP/IPé…ç½®ä¿¡æ¯ï¼Œä»¥å®ç°é€šè¿‡å±€åŸŸç½‘çš„ç½‘å…³æˆ–è·¯ç”±å™¨è®¿é—®äº’è”ç½‘ã€‚*

**ä½¿ç”¨æ¡¥æ¥æ¨¡å¼çš„è™šæ‹Ÿç³»ç»Ÿå’Œå®¿ä¸»æœºå™¨çš„å…³ç³»ï¼Œå°±åƒè¿æ¥åœ¨åŒä¸€ä¸ªHubä¸Šçš„ä¸¤å°ç”µè„‘ã€‚æƒ³è®©å®ƒä»¬ç›¸äº’é€šè®¯ï¼Œéœ€è¦ä¸ºè™šæ‹Ÿç³»ç»Ÿé…ç½®IPåœ°å€å’Œå­ç½‘æ©ç ï¼Œå¦åˆ™å°±æ— æ³•é€šä¿¡ã€‚** 

#### é€‚ç”¨åœºæ™¯

åœ¨å±€åŸŸç½‘å†…æ–°å»ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡å™¨ï¼Œä¸ºå±€åŸŸç½‘ç”¨æˆ·æä¾›ç½‘ç»œæœåŠ¡ï¼Œå¯é€‰æ‹©æ¡¥æ¥æ¨¡å¼ã€‚ 

### 2ã€host-only(ä¸»æœºæ¨¡å¼) 

åœ¨æŸäº›ç‰¹æ®Šçš„ç½‘ç»œè°ƒè¯•ç¯å¢ƒä¸­ï¼Œè¦æ±‚å°†çœŸå®ç¯å¢ƒå’Œè™šæ‹Ÿç¯å¢ƒéš”ç¦»å¼€ï¼Œè¿™æ—¶å°±å¯é‡‡ç”¨host-onlyæ¨¡å¼ã€‚åœ¨host-onlyæ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„è™šæ‹Ÿç³»ç»Ÿæ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œä½†è™šæ‹Ÿç³»ç»Ÿå’ŒçœŸå®çš„ç½‘ç»œæ˜¯è¢«éš”ç¦»å¼€çš„ã€‚åœ¨host-onlyæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿç³»ç»Ÿçš„TCP/IPé…ç½®ä¿¡æ¯(å¦‚IPåœ°å€ã€ç½‘å…³åœ°å€ã€DNSæœåŠ¡å™¨ç­‰)ï¼Œéƒ½æ˜¯ç”±VMnet1(host-only)è™šæ‹Ÿç½‘ç»œçš„DHCPæœåŠ¡å™¨æ¥åŠ¨æ€åˆ†é…çš„ã€‚ 

#### é€‚ç”¨åœºæ™¯

åˆ›å»ºä¸€ä¸ªä¸ç½‘å†…å…¶ä»–æœºå™¨ç›¸éš”ç¦»çš„è™šæ‹Ÿç³»ç»Ÿï¼Œè¿›è¡ŒæŸäº›ç‰¹æ®Šçš„ç½‘ç»œè°ƒè¯•å·¥ä½œï¼Œå¯é€‰æ‹©host-onlyæ¨¡å¼ã€‚ 

> æç¤º:åœ¨host-onlyæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿç³»ç»Ÿå’Œå®¿ä¸»æœºå™¨ç³»ç»Ÿæ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œç›¸å½“äºè¿™ä¸¤å°æœºå™¨é€šè¿‡åŒç»çº¿äº’è¿ã€‚ 

### 3ã€NAT(ç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼) 

åœ¨NATç½‘ç»œä¸­ï¼Œä¼šä½¿ç”¨åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœºï¼ŒHostä¸Šçš„VMware Network Adapter VMnet8è™šæ‹Ÿç½‘å¡è¢«è¿æ¥åˆ°VMnet8äº¤æ¢æœºä¸Šï¼Œæ¥ä¸Guestè¿›è¡Œé€šä¿¡ï¼Œä½†æ˜¯VMware Network Adapter VMnet8è™šæ‹Ÿç½‘å¡ä»…ä»…æ˜¯ç”¨äºå’ŒVMnet8ç½‘æ®µé€šä¿¡ç”¨çš„ï¼Œå®ƒå¹¶ä¸ä¸ºVMnet8ç½‘æ®µæä¾›è·¯ç”±åŠŸèƒ½ï¼Œå¤„äºè™šæ‹ŸNATç½‘ç»œä¸‹çš„Guestæ˜¯ä½¿ç”¨è™šæ‹Ÿçš„NATæœåŠ¡å™¨è¿æ¥çš„Internetçš„ã€‚ è¿™æ—¶å€™ï¼ŒGuestå’ŒHostå°±å¯ä»¥å®ç°äº’è®¿äº†ï¼Œå¹¶ä¸”å¦‚æœHostæ­¤æ—¶å·²ç»è¿æ¥åˆ°äº†Internetï¼Œé‚£ä¹ˆGuestä¹Ÿå°±å¯ä»¥è¿ä¸ŠInternetäº†ã€‚

**é‚£ä¹ˆVMware Network Adapter VMnet8è™šæ‹Ÿç½‘å¡åœ¨è¿™é‡Œæ‰®æ¼”äº†ä¸€ä¸ªä»€ä¹ˆè§’è‰²å‘¢ï¼Ÿ**

*å®ƒä»…ä»…æ˜¯ä¸ºHostå’ŒNATè™šæ‹Ÿç½‘ç»œä¸‹çš„Guesté€šä¿¡æä¾›ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥ï¼Œå³ä¾¿Disableæ‰è¿™å—è™šæ‹Ÿç½‘å¡ï¼ŒGuestä»ç„¶æ˜¯å¯ä»¥ä¸Šç½‘çš„ï¼Œåªæ˜¯Hostæ— æ³•å†è®¿é—®VMnet8ç½‘æ®µè€Œå·²ã€‚ è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œä¸»æœºéœ€è¦å¼€å¯vmdhcpå’ŒvmnatæœåŠ¡ã€‚*

*ä½¿ç”¨NATæ¨¡å¼ï¼Œå°±æ˜¯è®©è™šæ‹Ÿç³»ç»Ÿå€ŸåŠ©NAT(ç½‘ç»œåœ°å€è½¬æ¢)åŠŸèƒ½ï¼Œé€šè¿‡å®¿ä¸»æœºå™¨æ‰€åœ¨çš„ç½‘ç»œæ¥è®¿é—®å…¬ç½‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨NATæ¨¡å¼å¯ä»¥å®ç°åœ¨è™šæ‹Ÿç³»ç»Ÿé‡Œè®¿é—®äº’è”ç½‘ã€‚NATæ¨¡å¼ä¸‹çš„è™šæ‹Ÿç³»ç»Ÿçš„TCP/IPé…ç½®ä¿¡æ¯æ˜¯ç”±VMnet8(NAT)è™šæ‹Ÿç½‘ç»œçš„DHCPæœåŠ¡å™¨æä¾›çš„ï¼Œæ— æ³•è¿›è¡Œæ‰‹å·¥ä¿®æ”¹ï¼Œå› æ­¤è™šæ‹Ÿç³»ç»Ÿä¹Ÿå°±æ— æ³•å’Œæœ¬å±€åŸŸç½‘ä¸­çš„å…¶ä»–çœŸå®ä¸»æœºè¿›è¡Œé€šè®¯ã€‚é‡‡ç”¨NATæ¨¡å¼æœ€å¤§çš„ä¼˜åŠ¿æ˜¯è™šæ‹Ÿç³»ç»Ÿæ¥å…¥äº’è”ç½‘éå¸¸ç®€å•ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•å…¶ä»–çš„é…ç½®ï¼Œåªéœ€è¦å®¿ä¸»æœºå™¨èƒ½è®¿é—®äº’è”ç½‘å³å¯ã€‚*

#### é€‚ç”¨åœºæ™¯

 ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç³»ç»Ÿï¼Œåœ¨è™šæ‹Ÿç³»ç»Ÿä¸­ä¸ç”¨è¿›è¡Œä»»ä½•æ‰‹å·¥é…ç½®å°±èƒ½ç›´æ¥è®¿é—®äº’è”ç½‘ï¼Œå¯é€‰æ‹©NATæ¨¡å¼ã€‚ 

> æç¤º:ä»¥ä¸Šæ‰€æåˆ°çš„NATæ¨¡å¼ä¸‹çš„VMnet8è™šæ‹Ÿç½‘ç»œï¼Œhost-onlyæ¨¡å¼ä¸‹çš„VMnet1è™šæ‹Ÿç½‘ç»œï¼Œä»¥åŠbridgedæ¨¡å¼ä¸‹çš„ VMnet0è™šæ‹Ÿç½‘ç»œï¼Œéƒ½æ˜¯ç”±VMWareè™šæ‹Ÿæœºè‡ªåŠ¨é…ç½®è€Œç”Ÿæˆçš„ï¼Œä¸éœ€è¦ç”¨æˆ·è‡ªè¡Œè®¾ç½®ã€‚VMnet8å’ŒVMnet1æä¾›DHCPæœåŠ¡ï¼ŒVMnet0è™šæ‹Ÿ ç½‘ç»œåˆ™ä¸æä¾›

## ğŸ¬ä¸‰ç§æ¨¡å¼æœ¬è´¨åŒºåˆ« 

###  VMwareçš„è™šæ‹Ÿè®¾å¤‡ 

*VMnet0ï¼šç”¨äºè™šæ‹Ÿæ¡¥æ¥ç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœº*

*VMnet1ï¼šç”¨äºè™šæ‹ŸHost-Onlyç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœº*

*VMnet8ï¼šç”¨äºè™šæ‹ŸNATç½‘ç»œä¸‹çš„è™šæ‹Ÿäº¤æ¢æœº*

*VMware Network Adepter VMnet1ï¼šHostç”¨äºä¸Host-Onlyè™šæ‹Ÿç½‘ç»œè¿›è¡Œé€šä¿¡çš„è™šæ‹Ÿç½‘å¡*

*VMware Network Adepter VMnet8ï¼šHostç”¨äºä¸NATè™šæ‹Ÿç½‘ç»œè¿›è¡Œé€šä¿¡çš„è™šæ‹Ÿç½‘å¡*

> å®‰è£…äº†VMwareè™šæ‹Ÿæœºåï¼Œä¼šåœ¨ç½‘ç»œè¿æ¥å¯¹è¯æ¡†ä¸­å¤šå‡ºä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ã€‚



###  1ã€æ¡¥æ¥ç½‘ç»œæ¨¡å¼ 

æ¡¥æ¥ç½‘ç»œæ˜¯æŒ‡æœ¬åœ°ç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡é€šè¿‡VMnet0è™šæ‹Ÿäº¤æ¢æœºè¿›è¡Œæ¡¥æ¥ï¼Œç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡åœ¨æ‹“æ‰‘å›¾ä¸Šå¤„äºåŒç­‰åœ°ä½(è™šæ‹Ÿç½‘å¡æ—¢ä¸æ˜¯Adepter VMnet1ä¹Ÿä¸æ˜¯Adepter VMnet8)ã€‚è¿™é‡Œçš„VMnet0ç›¸å½“äºä¸€ä¸ªäº¤æ¢æœºï¼Œæœ€ç»ˆé€šè¿‡è¿™ä¸ªè™šæ‹Ÿäº¤æ¢æœºä½¿å…¶ä¸¤ç«¯åœ¨ä¸€ä¸ªç½‘æ®µä¸­ã€‚

![1649941141976](Images/1649941141976.png)

é‚£ä¹ˆç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡å°±ç›¸å½“äºå¤„äºåŒä¸€ä¸ªç½‘æ®µï¼Œè™šæ‹Ÿäº¤æ¢æœºå°±ç›¸å½“äºä¸€å°ç°å®ç½‘ç»œä¸­çš„äº¤æ¢æœºã€‚æ‰€ä»¥ä¸¤ä¸ªç½‘å¡çš„IPåœ°å€ä¹Ÿè¦è®¾ç½®ä¸ºåŒä¸€ç½‘æ®µã€‚å¦‚æœä½¿è™šæ‹Ÿæœºä½¿ç”¨æ¡¥æ¥æ¨¡å¼è¿æ¥ç½‘ç»œï¼Œåœ¨è¿è¡Œcmdå‘½ä»¤åäº§çœ‹ä¸¤ä¸ªIPï¼Œå¯ä»¥å‘ç°IPv4çš„IP å’Œè™šæ‹Ÿæœºå¤„äºä¸€ä¸ªç½‘æ®µã€‚ç‰©ç†ç½‘å¡å’Œè™šæ‹Ÿç½‘å¡çš„IPåœ°å€å¤„äºåŒä¸€ä¸ªç½‘æ®µï¼Œå­ç½‘æ©ç ã€ç½‘å…³ã€DNSç­‰å‚æ•°éƒ½ç›¸åŒã€‚ä¸¤ä¸ªç½‘å¡åœ¨æ‹“æ‰‘ç»“æ„ä¸­æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ã€‚

*æ¡¥æ¥ç½‘ç»œæ¨¡å¼æ˜¯VMwareè™šæ‹Ÿæœºä¸­æœ€ç®€å•ç›´æ¥çš„æ¨¡å¼ã€‚å®‰è£…è™šæ‹Ÿæœºæ—¶å®ƒä¸ºé»˜è®¤é€‰é¡¹ã€‚åœ¨æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºå’Œå®¿ä¸»è®¡ç®—æœºå¤„äºåŒç­‰åœ°ä½ï¼Œè™šæ‹Ÿæœºå°±åƒæ˜¯ä¸€å°çœŸå®ä¸»æœºä¸€æ ·å­˜åœ¨äºå±€åŸŸç½‘ä¸­ã€‚å› æ­¤åœ¨æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å°±è¦åƒå¯¹å¾…å…¶ä»–çœŸå®è®¡ç®—æœºä¸€æ ·ä¸ºå…¶é…ç½®IPã€ç½‘å…³ã€å­ç½‘æ©ç ç­‰ç­‰ã€‚*

å½“å¯ä»¥è‡ªç”±åˆ†é…å±€åŸŸç½‘IPæ—¶ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼å°±å¯ä»¥è™šæ‹Ÿå‡ºä¸€å°çœŸå®å­˜åœ¨çš„ä¸»æœºã€‚


### 2ã€NATæ¨¡å¼ 

*åœ¨NATç½‘ç»œä¸­ï¼Œä¼šç”¨åˆ°VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡ï¼Œä¸»æœºä¸Šçš„VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡è¢«ç›´æ¥è¿æ¥åˆ°VMnet8è™šæ‹Ÿäº¤æ¢æœºä¸Šä¸è™šæ‹Ÿç½‘å¡è¿›è¡Œé€šä¿¡ã€‚VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡çš„ä½œç”¨ä»…é™äºå’ŒVMnet8ç½‘æ®µè¿›è¡Œé€šä¿¡ï¼Œå®ƒä¸ç»™VMnet8ç½‘æ®µæä¾›è·¯ç”±åŠŸèƒ½ï¼Œæ‰€ä»¥è™šæ‹Ÿæœºè™šæ‹Ÿä¸€ä¸ªNATæœåŠ¡å™¨ï¼Œä½¿è™šæ‹Ÿç½‘å¡å¯ä»¥è¿æ¥åˆ°Internetã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç«¯å£æ˜ å°„åŠŸèƒ½ï¼Œè®©è®¿é—®ä¸»æœº80ç«¯å£çš„è¯·æ±‚æ˜ å°„åˆ°è™šæ‹Ÿæœºçš„80ç«¯å£ä¸Šã€‚*

VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡çš„IPåœ°å€æ˜¯åœ¨å®‰è£…VMwareæ—¶ç”±ç³»ç»ŸæŒ‡å®šç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸è¦ä¿®æ”¹è¿™ä¸ªæ•°å€¼ï¼Œå¦åˆ™ä¼šä½¿ä¸»æœºå’Œè™šæ‹Ÿæœºæ— æ³•é€šä¿¡ã€‚
![1649941846229](Images/1649941846229.png)



è™šæ‹Ÿå‡ºæ¥çš„ç½‘æ®µå’ŒNATæ¨¡å¼è™šæ‹Ÿç½‘å¡çš„ç½‘æ®µæ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¸º192.168.111.Xï¼ŒåŒ…æ‹¬NATæœåŠ¡å™¨çš„IPåœ°å€ä¹Ÿæ˜¯è¿™ä¸ªç½‘æ®µã€‚åœ¨å®‰è£…VMwareä¹‹ååŒæ ·ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹ŸDHCPæœåŠ¡å™¨ï¼Œä¸ºNATæœåŠ¡å™¨åˆ†é…IPåœ°å€ã€‚å½“ä¸»æœºå’Œè™šæ‹Ÿæœºè¿›è¡Œé€šä¿¡çš„æ—¶å€™å°±ä¼šè°ƒç”¨VMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡ï¼Œå› ä¸ºä»–ä»¬éƒ½åœ¨ä¸€ä¸ªç½‘æ®µï¼Œæ‰€ä»¥é€šä¿¡å°±ä¸æˆé—®é¢˜äº†ã€‚å®é™…ä¸Šï¼ŒVMware Network Adepter VMnet8è™šæ‹Ÿç½‘å¡çš„ä½œç”¨å°±æ˜¯ä¸ºä¸»æœºå’Œè™šæ‹Ÿæœºçš„é€šä¿¡æä¾›ä¸€ä¸ªæ¥å£ï¼Œå³ä½¿ä¸»æœºçš„ç‰©ç†ç½‘å¡è¢«å…³é—­ï¼Œè™šæ‹Ÿæœºä»ç„¶å¯ä»¥è¿æ¥åˆ°Internetï¼Œä½†æ˜¯ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´å°±ä¸èƒ½äº’è®¿äº†ã€‚

*åœ¨NATæ¨¡å¼ä¸‹ï¼Œå®¿ä¸»è®¡ç®—æœºç›¸å½“äºä¸€å°å¼€å¯äº†DHCPåŠŸèƒ½çš„è·¯ç”±å™¨ï¼Œè€Œè™šæ‹Ÿæœºåˆ™æ˜¯å†…ç½‘ä¸­çš„ä¸€å°çœŸå®ä¸»æœºï¼Œé€šè¿‡è·¯ç”±å™¨(å®¿ä¸»è®¡ç®—æœº)DHCPåŠ¨æ€è·å¾—ç½‘ç»œå‚æ•°ã€‚å› æ­¤åœ¨NATæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºå¯ä»¥è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œåä¹‹åˆ™ä¸è¡Œï¼Œå› ä¸ºè™šæ‹Ÿæœºå±äºå†…ç½‘ã€‚ä½¿ç”¨NATæ¨¡å¼çš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬ä¸éœ€è¦åšä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œåªè¦å®¿ä¸»è®¡ç®—æœºå¯ä»¥è¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œï¼Œè™šæ‹Ÿæœºä¹Ÿå¯ä»¥ã€‚*

NATæ¨¡å¼é€šå¸¸ä¹Ÿæ˜¯å¤§å­¦æ ¡å›­ç½‘Vmwareæœ€æ™®éé‡‡ç”¨çš„è¿æ¥æ¨¡å¼ï¼Œå› ä¸ºä¸€èˆ¬åªèƒ½æ‹¥æœ‰ä¸€ä¸ªå¤–éƒ¨IPã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéå¸¸é€‚åˆä½¿ç”¨NATæ¨¡å¼ã€‚


### 3ã€host-onlyæ¨¡å¼ 

åœ¨Host-Onlyæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿç½‘ç»œæ˜¯ä¸€ä¸ªå…¨å°é—­çš„ç½‘ç»œï¼Œå®ƒå”¯ä¸€èƒ½å¤Ÿè®¿é—®çš„å°±æ˜¯ä¸»æœºã€‚å…¶å®Host-Onlyç½‘ç»œå’ŒNATç½‘ç»œå¾ˆç›¸ä¼¼ï¼Œä¸åŒçš„åœ°æ–¹å°±æ˜¯ Host-Onlyç½‘ç»œæ²¡æœ‰NATæœåŠ¡ï¼Œæ‰€ä»¥è™šæ‹Ÿç½‘ç»œä¸èƒ½è¿æ¥åˆ°Internetã€‚ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡VMware Network Adepter VMnet1è™šæ‹Ÿç½‘å¡æ¥å®ç°çš„ã€‚
![1649942088345](Images/1649942088345.png)

åŒNATä¸€æ ·ï¼ŒVMware Network Adepter VMnet1è™šæ‹Ÿç½‘å¡çš„IPåœ°å€ä¹Ÿæ˜¯VMwareç³»ç»ŸæŒ‡å®šçš„ï¼ŒåŒæ—¶ç”Ÿæˆçš„è™šæ‹ŸDHCPæœåŠ¡å™¨å’Œè™šæ‹Ÿç½‘å¡çš„IPåœ°å€ä½äºåŒä¸€ç½‘æ®µï¼Œä½†å’Œç‰©ç†ç½‘å¡çš„IPåœ°å€ä¸åœ¨åŒä¸€ç½‘æ®µã€‚Host-Onlyçš„å®—æ—¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªä¸å¤–ç•Œéš”ç»çš„å†…éƒ¨ç½‘ç»œï¼Œæ¥æé«˜å†…ç½‘çš„å®‰å…¨æ€§ã€‚è¿™ä¸ªåŠŸèƒ½æˆ–è®¸å¯¹æ™®é€šç”¨æˆ·æ¥è¯´æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œä½†å¤§å‹æœåŠ¡å•†ä¼šå¸¸å¸¸åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚

*å¦‚æœæƒ³ä¸ºVMnet1ç½‘æ®µæä¾›è·¯ç”±åŠŸèƒ½ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨RRASï¼Œè€Œä¸èƒ½ä½¿ç”¨XPæˆ–2000çš„ICSï¼Œå› ä¸ºICSä¼šæŠŠå†…ç½‘çš„IPåœ°å€æ”¹ä¸º 192.168.0.1ï¼Œä½†è™šæ‹Ÿæœºæ˜¯ä¸ä¼šç»™VMnet1è™šæ‹Ÿç½‘å¡åˆ†é…è¿™ä¸ªåœ°å€çš„ï¼Œé‚£ä¹ˆä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´å°±ä¸èƒ½é€šä¿¡äº†ã€‚*

åœ¨Host-onlyæ¨¡å¼ä¸‹ï¼Œç›¸å½“äºè™šæ‹Ÿæœºé€šè¿‡åŒç»çº¿å’Œå®¿ä¸»è®¡ç®—æœºç›´è¿ï¼Œè€Œå®¿ä¸»è®¡ç®—æœºä¸æä¾›ä»»ä½•è·¯ç”±æœåŠ¡ã€‚å› æ­¤åœ¨Host-onlyæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºå¯ä»¥å’Œå®¿ä¸»è®¡ç®—æœºäº’ç›¸è®¿é—®ï¼Œä½†æ˜¯è™šæ‹Ÿæœºæ— æ³•è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚å½“è¦ç»„æˆä¸€ä¸ªä¸ç‰©ç†ç½‘ç»œç›¸éš”ç¦»çš„è™šæ‹Ÿç½‘ç»œæ—¶ï¼Œæ— ç–‘éå¸¸é€‚åˆä½¿ç”¨Host-onlyæ¨¡å¼ã€‚


## âœé…ç½®NATç½‘ç»œ

### å‰ç½®å·¥ä½œ

1ã€é¦–å…ˆæ‰“å¼€å·²ç»é…ç½®å¥½çš„è™šæ‹Ÿæœºï¼Œä½¿ç”¨ç®¡ç†å‘˜è´¦å·(root)è¿›è¡Œç™»å½•ï¼Œç„¶åé€šè¿‡ IP A æŸ¥çœ‹IPåœ°å€ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·æ–¹ä¾¿æ“ä½œã€‚

![1649942460098](Images/1649942460098.png)

2ã€è¿æ¥ç¬¬ä¸‰æ–¹å·¥å…·

å®‰è£…åŒ…ä¸Šä¼ è‡³ç™¾åº¦ç½‘ç›˜[**Xshell7ä¸‹è½½é“¾æ¥**](https://pan.baidu.com/s/1VW8CjO63RsYHXsgQLWgADg)
**æå–ç ï¼šXs07** 

> æå–å®‰è£…åŒ…æ–‡ä»¶åï¼Œè‡ªè¡Œå®‰è£…å³å¯

![1649942957814](Images/1649942957814.png)

3ã€ä½¿ç”¨rootç®¡ç†å‘˜ç”¨æˆ·ç™»å½•Xshell

![1649943155770](Images/1649943155770.png)

![1649943297632](Images/1649943297632.png)

==åˆæ¬¡ç™»å½•ï¼Œæç¤ºSSHï¼Œé€‰æ‹©æ¥å—å³å¯==

4ã€ä¿®æ”¹ä¸»æœºåï¼Œä¹‹å‰é…ç½®æ—¶å¯¹ä¸»æœºåè¿›è¡Œè¿‡ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸»æœºåä¸ºhadoop

```shell
# æŸ¥çœ‹ä¸»æœºå
hostname
```

![1649943794259](Images/1649943794259.png)

```shell
# ä¿®æ”¹ä¸»æœºå
vi /ect/hostname
```

![1649943577168](Images/1649943577168.png)5ã€æ›´æ”¹/etc/sysconfigä¸‹çš„networkæ–‡ä»¶ï¼Œåœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ vi /etc/sysconfig/networkï¼Œç„¶åæŠŠHOSTNAMEåé¢çš„å€¼æ›´æ”¹ä¸ºæƒ³è¦è®¾ç½®çš„ä¸»æœºåã€‚ 

```shell
vi /etc/sysconfig/network
```

![1649943977846](Images/1649943977846.png)

6ã€ æ›´æ”¹/etcä¸‹çš„hostsæ–‡ä»¶ï¼Œåœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ vi /etc/hostsï¼Œç„¶åæ·»åŠ ä¸»æœºåæ˜ å°„

```shell
# æ·»åŠ ä¸»æœºåæ˜ å°„
vi /etc/hosts
```

![1649944179574](Images/1649944179574.png)

![1649944262764](Images/1649944262764.png)

7ã€ä¸ºæ™®é€šç”¨æˆ·èµ‹äºˆrootæƒé™

```shell
# èµ‹äºˆrootæƒé™
vi /etc/sudoers
```

![1649944539275](Images/1649944539275.png)

==æ³¨æ„ï¼šä½¿ç”¨ `wq!`å¼ºåˆ¶é€€å‡ºä¿å­˜==

8ã€ å…³é—­selinux

SELinuxä¸€å…±æœ‰3ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯Enforcingï¼ŒPermissiveå’ŒDisabledçŠ¶æ€ã€‚ç¬¬ä¸€ç§æ˜¯é»˜è®¤çŠ¶æ€ï¼Œè¡¨ç¤ºå¼ºåˆ¶å¯ç”¨ï¼Œç¬¬äºŒç§æ˜¯å®½å®¹çš„æ„æ€ï¼Œå³å¤§éƒ¨åˆ†è§„åˆ™éƒ½æ”¾è¡Œã€‚ç¬¬ä¸‰ç§æ˜¯ç¦ç”¨ï¼Œå³ä¸è®¾ç½®ä»»ä½•è§„åˆ™ã€‚åªèƒ½é€šè¿‡setenforceå‘½ä»¤æ¥è®¾ç½®å‰é¢ä¸¤ç§çŠ¶æ€ï¼Œè€Œå¦‚æœæƒ³ä¿®æ”¹ä¸ºdisableçŠ¶æ€ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶é‡å¯ç³»ç»Ÿã€‚

 EnforcingçŠ¶æ€çš„å€¼æ˜¯1ï¼Œè¡¨ç¤ºç›®å‰ä¸ºå¼€å¯çŠ¶æ€ï¼Œå…³é—­permissiveçŠ¶æ€æ˜¯0ï¼Œå› æ­¤è®¾ç½®ä¸ºpermissive 0ï¼Œå‘½ä»¤å°±æ˜¯ï¼šsetenforce 0 

```sh
# æŸ¥çœ‹selinuxå½“å‰çŠ¶æ€
getenforce
```

![1649945077238](Images/1649945077238.png)

 ```shell
# å…³é—­selinuxå¼€å¯çŠ¶æ€
setenforce 0 
# ä½†æ˜¯ä¸Šé¢é‚£ä¸­ä¿®æ”¹æ–¹å¼é‡å¯åå°±ä¼šå¤±æ•ˆï¼Œåªæ˜¯ä¸´æ—¶ç”Ÿæ•ˆã€‚
 ```

![1649945308763](Images/1649945308763.png)

 é€šè¿‡ä¿®æ”¹è®¾ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ°¸ä¹…ç”Ÿæ•ˆ 

```shell
# å°†selinuxæ°¸ä¹…å…³é—­
vi /etc/selinux/config 
```

![1649945465445](Images/1649945465445.png) å°†å®ƒåé¢çš„å€¼ä¿®æ”¹ä¸ºpermissiveæˆ–è€…disabledï¼Œè¿™æ ·å³ä½¿é‡å¯ç”µè„‘ä»¥åï¼Œå®ƒé»˜è®¤çš„çŠ¶æ€éƒ½ä¼šæ˜¯permissveæˆ–disabledçŠ¶æ€ï¼Œè€Œä¸ä¼šæ¢å¤åˆ°enforcingçŠ¶æ€ï¼Œè®¾ç½®åéœ€è¦å¯¹è™šæ‹Ÿè¿›è¡Œé‡å¯ã€‚ 

9ã€å…³é—­é˜²ç«å¢™(æ­¤æ•™ç¨‹ä»¥CentOS7å‡†ï¼ŒCentOS6å…³é—­æ–¹å¼ç¨å¾®æœ‰äº›å·®åˆ«)

é˜²ç«å¢™å®ˆæŠ¤ firewalld æœåŠ¡å¼•å…¥äº†ä¸€ä¸ªä¿¡ä»»çº§åˆ«çš„æ¦‚å¿µæ¥ç®¡ç†ä¸ä¹‹ç›¸å…³è”çš„è¿æ¥ä¸æ¥å£ã€‚å®ƒæ”¯æŒ ipv4 ä¸ ipv6ï¼Œå¹¶æ”¯æŒç½‘æ¡¥ï¼Œé‡‡ç”¨ firewall-cmd (command) æˆ– firewall-config (gui) æ¥åŠ¨æ€çš„ç®¡ç† kernel netfilter çš„ä¸´æ—¶æˆ–æ°¸ä¹…çš„æ¥å£è§„åˆ™ï¼Œå¹¶å®æ—¶ç”Ÿæ•ˆè€Œæ— éœ€é‡å¯æœåŠ¡ã€‚

å®‰è£…æ­¥éª¤

```shell
# é…ç½®å¥½ç½‘ç»œçš„æƒ…å†µä¸‹å¯é€šè¿‡yumå‘½ä»¤è¿›è¡Œå®‰è£…
yum install firewalld

# å¦‚æœéœ€è¦å›¾å½¢ç•Œé¢çš„è¯ï¼Œåˆ™å†å®‰è£…
yum install firewall-config
```

å‚æ•°è¯¦è§£

```shell
Firewall èƒ½å°†ä¸åŒçš„ç½‘ç»œè¿æ¥å½’ç±»åˆ°ä¸åŒçš„ä¿¡ä»»çº§åˆ«ï¼ŒZone æä¾›äº†ä»¥ä¸‹å‡ ä¸ªçº§åˆ«:
drop: ä¸¢å¼ƒæ‰€æœ‰è¿›å…¥çš„åŒ…ï¼Œè€Œä¸ç»™å‡ºä»»ä½•å“åº”
block: æ‹’ç»æ‰€æœ‰å¤–éƒ¨å‘èµ·çš„è¿æ¥ï¼Œå…è®¸å†…éƒ¨å‘èµ·çš„è¿æ¥
public: å…è®¸æŒ‡å®šçš„è¿›å…¥è¿æ¥
external: åŒä¸Šï¼Œå¯¹ä¼ªè£…çš„è¿›å…¥è¿æ¥ï¼Œä¸€èˆ¬ç”¨äºè·¯ç”±è½¬å‘
dmz: å…è®¸å—é™åˆ¶çš„è¿›å…¥è¿æ¥
work: å…è®¸å—ä¿¡ä»»çš„è®¡ç®—æœºè¢«é™åˆ¶çš„è¿›å…¥è¿æ¥ï¼Œç±»ä¼¼ workgroup
home: åŒä¸Šï¼Œç±»ä¼¼ homegroup
internal: åŒä¸Šï¼ŒèŒƒå›´é’ˆå¯¹æ‰€æœ‰äº’è”ç½‘ç”¨æˆ·
trusted: ä¿¡ä»»æ‰€æœ‰è¿æ¥

è¿‡æ»¤è§„åˆ™:
source: æ ¹æ®æºåœ°å€è¿‡æ»¤
interface: æ ¹æ®ç½‘å¡è¿‡æ»¤
service: æ ¹æ®æœåŠ¡åè¿‡æ»¤
port: æ ¹æ®ç«¯å£è¿‡æ»¤
icmp-block: icmp æŠ¥æ–‡è¿‡æ»¤ï¼ŒæŒ‰ç…§ icmp ç±»å‹é…ç½®
masquerade: ip åœ°å€ä¼ªè£…
forward-port: ç«¯å£è½¬å‘
rule: è‡ªå®šä¹‰è§„åˆ™

å…¶ä¸­ï¼Œè¿‡æ»¤è§„åˆ™çš„ä¼˜å…ˆçº§éµå¾ªå¦‚ä¸‹é¡ºåº
1.source
2.interface
3.firewalld.conf

# é˜²ç«å¢™å¸®åŠ©å‘½ä»¤
firewall-cmd --help
```

**æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€**

```shell
# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
systemctl status firewalld

# ä¸¤ç§æ–¹å¼éƒ½å¯è¿›è¡ŒæŸ¥çœ‹
systemctl status firewalld.service
```

![1649945838808](Images/1649945838808.png)

10ã€ä¸´æ—¶å…³é—­é˜²ç«å¢™

```shell
# å…³é—­é˜²ç«å¢™
systemctl stop firewalld

# ä¸¤ç§æ–¹å¼éƒ½å¯
systemctl stop firewalld.service
```

![1649946050953](Images/1649946050953.png)

11ã€æ°¸ä¹…å…³é—­é˜²ç«å¢™

```shell
# æ°¸ä¹…å…³é—­é˜²ç«å¢™
systemctl disable firewalld

# ä¸¤ç§æ–¹å¼éƒ½å¯
systemctl disable firewalld.service
```

![1649946253345](Images/1649946253345.png)

é˜²ç«å¢™çš„ç›¸å…³å‘½ä»¤

```shell
# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯è¿›è¡ŒæŸ¥çœ‹
systemctl status firewalld
systemctl status firewalld.service

# å…³é—­é˜²ç«å¢™ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯
systemctl stop firewalld
systemctl stop firewalld.service

# æ°¸ä¹…å…³é—­é˜²ç«å¢™ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯
systemctl disable firewalld
systemctl disable firewalld.service

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable firewalld.service

# é‡å¯é˜²ç«å¢™
firewall-cmd--reload

========================================================================
# CentOS6é˜²ç«å¢™ç›¸å…³å‘½ä»¤
# æŸ¥çœ‹é˜²ç«çŠ¶æ€
service Â iptablesÂ status

# æš‚æ—¶å…³é—­é˜²ç«å¢™
service Â iptablesÂ stop

# æ°¸ä¹…å…³é—­é˜²ç«å¢™
chkconfig iptables off

# é‡å¯é˜²ç«å¢™
service iptables restartÂ Â 

# æŸ¥çœ‹å·²å¼€æ”¾çš„ç«¯å£(é»˜è®¤ä¸å¼€æ”¾ä»»ä½•ç«¯å£)
firewall-cmd --list-ports

# æŸ¥çœ‹æ‰“å¼€çš„ç«¯å£
/etc/init.d/iptables status

# å¼€å¯ç«¯å£(80ä¸ºä¾‹)
# firewall-cmd --zone=public(ä½œç”¨åŸŸ) --add-port=80/tcp(ç«¯å£å’Œè®¿é—®ç±»å‹) --permanent(permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ)

firewall-cmd --zone=public --add-port=80/tcp --permanent

# åˆ é™¤ç«¯å£å·(80ä¸ºä¾‹)
firewall-cmd --zone= public --remove-port=80/tcp --permanent

========================================================================
# æ‰“å¼€æŸç«¯å£(ä»¥8080ä¸ºä¾‹)
# å¼€å¯ç«¯å£
iptables-A INPUT-p tcp--dport8080-j ACCEPT

# ä¿å­˜å¹¶é‡å¯é˜²ç«å¢™
/etc/rc.d/init.d/iptables save/etc/init.d/iptables restart

# æ‰“å¼€49152~65534ä¹‹é—´çš„ç«¯å£
iptables-A INPUT-p tcp--dport49152:65534-j ACCEPT

#åŒæ ·ï¼Œå¯¹è®¾ç½®è¿›è¡Œä¿å­˜ï¼Œå¹¶é‡å¯é˜²ç«å¢™ã€‚

# å…¶ä»–æ‰“å¼€æ–¹å¼ï¼Œé€šè¿‡ä¿®æ”¹/etc/sysconfig/iptablesæ–‡ä»¶çš„æ–¹å¼å¼€å¯ç«¯å£ï¼Œå¦‚ä¸‹
vi/etc/sysconfig/iptables

# ç„¶ååœ¨æ–‡ä»¶ä¸­å¢åŠ ä¸€è¡Œ
-A RH -Firewall-1 -INPUT  -m state -state NEW -m tcp -p tcp -dport 80 -j ACCEPT

# å‚æ•°è¯´æ˜:
# â€“A å‚æ•°å°±çœ‹æˆæ˜¯æ·»åŠ ä¸€æ¡è§„åˆ™
# â€“p æŒ‡å®šæ˜¯ä»€ä¹ˆåè®®ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„tcp åè®®ï¼Œå½“ç„¶ä¹Ÿæœ‰udpï¼Œä¾‹å¦‚53ç«¯å£çš„DNS
# â€“dport å°±æ˜¯ç›®æ ‡ç«¯å£ï¼Œå½“æ•°æ®ä»å¤–éƒ¨è¿›å…¥æœåŠ¡å™¨ä¸ºç›®æ ‡ç«¯å£
# â€“sport æ•°æ®ä»æœåŠ¡å™¨å‡ºå»ï¼Œåˆ™ä¸ºæ•°æ®æºç«¯å£ä½¿ç”¨
# â€“j å°±æ˜¯æŒ‡å®šæ˜¯ ACCEPT -æ¥æ”¶ æˆ–è€… DROP ä¸æ¥æ”¶

# æŸ¥çœ‹ç‰ˆæœ¬
firewall-cmd --version

# æŸ¥çœ‹å¸®åŠ©
firewall-cmd --help

# æŸ¥çœ‹åŒºåŸŸä¿¡æ¯
firewall-cmd --get-active-zones

# æŸ¥çœ‹æŒ‡å®šæ¥å£æ‰€å±åŒºåŸŸä¿¡æ¯
firewall-cmd --get-zone-of-interface=eth0

# æ‹’ç»æ‰€æœ‰åŒ…
firewall-cmd --panic-on

# å–æ¶ˆæ‹’ç»çŠ¶æ€
firewall-cmd --panic-off

# æŸ¥çœ‹æ˜¯å¦æ‹’ç»
firewall-cmd --query-panic

# å°†æ¥å£æ·»åŠ åˆ°åŒºåŸŸ(é»˜è®¤æ¥å£éƒ½åœ¨public)
firewall-cmd --zone=public --add-interface=eth0(æ°¸ä¹…ç”Ÿæ•ˆå†åŠ ä¸Š --permanent ç„¶åreloadé˜²ç«å¢™)

# è®¾ç½®é»˜è®¤æ¥å£åŒºåŸŸ
firewall-cmd --set-default-zone=public(ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯)

# æ›´æ–°é˜²ç«å¢™è§„åˆ™
firewall-cmd --reloadæˆ–firewall-cmd --complete-reload(ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸€ä¸ªæ— éœ€æ–­å¼€è¿æ¥ï¼Œå°±æ˜¯firewalldç‰¹æ€§ä¹‹ä¸€åŠ¨æ€
æ·»åŠ è§„åˆ™ï¼Œç¬¬äºŒä¸ªéœ€è¦æ–­å¼€è¿æ¥ï¼Œç±»ä¼¼é‡å¯æœåŠ¡)

# æŸ¥çœ‹æŒ‡å®šåŒºåŸŸæ‰€æœ‰æ‰“å¼€çš„ç«¯å£
firewall-cmd --zone=public --list-ports

# åœ¨æŒ‡å®šåŒºåŸŸæ‰“å¼€ç«¯å£ï¼ˆè®°å¾—é‡å¯é˜²ç«å¢™ï¼‰
firewall-cmd --zone=public --add-port=80/tcp(æ°¸ä¹…ç”Ÿæ•ˆå†åŠ ä¸Š --permanent)

# è¯´æ˜ï¼š
# â€“zone ä½œç”¨åŸŸ
# â€“add-port=8080/tcp æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®
# â€“permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ

```

12ã€é…ç½®NATç½‘ç»œè¿æ¥ï¼Œé¦–å…ˆæ‰¾åˆ°å·²å¼€å¯çš„è™šæ‹Ÿæœºï¼Œå³é”®ç‚¹å‡»æ‰“å¼€ï¼Œé€‰æ‹©è®¾ç½®

![1649947034968](Images/1649947034968.png)

å‰æ–‡å·²å¯¹IPåœ°å€è¿›è¡Œäº†é…ç½®å’Œè®¾ç½®ï¼Œæœ¬æ–‡ä¸åšè¿‡å¤šçš„å™è¿°

é…ç½®å‚æ•°è¯¦è§£

```shell
# ç‰©ç†è®¾å¤‡åï¼Œeth0ä¸ºç¬¬ä¸€å—ç½‘å¡ï¼›eth1ä¸ºç¬¬äºŒå—ç½‘å¡
DEVICE=eth0ã€€

# ç½‘å¡çš„MACåœ°å€ï¼Œ48ä½
HWADDR=00:0C:29:84:0C:21

# ä»¥å¤ªç½‘
TYPE=Ethernetã€€

# å”¯ä¸€çš„ä¸€ä¸ªç”¨æˆ·æ ‡è¯†ï¼Œç›¸å½“äºèº«ä»½è¯å·ç ï¼å¦‚æŸ¥çœ‹ç£ç›˜è®¾å¤‡çš„UUIDä½¿ç”¨blkidå‘½ä»¤
UUID=09ae6890-2925-4ca0-9cbc-e937593624f8ã€€

# æ§åˆ¶ç½‘å¡æ˜¯å¦å¼€æœºå¯åŠ¨
ONBOOT=yesã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€

# æ˜¯å¦é€šè¿‡networkmanagerç®¡ç†ç½‘å¡è®¾å¤‡
NM_CONTROLLED=yesã€€ã€€ã€€ã€€ã€€ã€€

# protoå–ä¸‹åˆ—å€¼ä¹‹ä¸€ï¼š
# none,å¼•å¯¼æ—¶ä¸ä½¿ç”¨åè®®ï¼›static,é™æ€åˆ†é…åœ°å€ï¼›bootpï¼Œä½¿ç”¨BOOTPåè®®ï¼›dhcpï¼Œä½¿ç”¨DHCPåè®®
BOOTPROTO=dhcpã€€ã€€ã€€

#IPåœ°å€ã€€
IPADDR=192.168.17.128ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€
ã€€
# å­ç½‘æ©ç ï¼Œåˆ’åˆ†ç½‘ç»œä½å’Œä¸»æœºä½ã€€ã€€ã€€
NETMASK=255.255.255.0ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€

#DNSæ˜¯æŠŠbaidu.comå˜æˆäº†baiduæœåŠ¡å™¨IPã€‚DNSå°±æ˜¯åŸŸåå’ŒIPçš„è§£æå·¥å…·
DNS2=192.168.224.2ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€
DNS1=8.8.8.8

#  ç½‘å…³åœ°å€ï¼Œè·¯ç”±å™¨çš„åœ°å€
GATEWAY=192.168.224.2ã€€ã€€

# MACåœ°å€
HWADDR=00:0C:29:84:0C:21
```

åªéœ€é…ç½®ä»¥ä¸‹å‚æ•°å³å¯

```shell
BOOTPROTO="static"
ONBOOT="yes"
IPADDR=192.168.124.11X
NETMASK=255.255.255.0
GATEWAY=192.168.224.X
DNS1=192.168.224.X
DNS2=8.8.8.8
HWADDR=00:0C:29:84:0C:2X
```

è¿›å…¥åˆ°ç½‘å¡è¿›è¡Œè¿›è¡Œé…ç½®

```shell
# é…ç½®ens33ç½‘å¡
vi /etc/sysconfig/network-scripts/ifcfg-ens33 
```

![1649948544473](Images/1649948544473.png)

13ã€é‡å¯ç½‘ç»œæœåŠ¡

```shell
systemctl restart network
```

14ã€æ„å¤–çš„å¤„ç†ï¼Œå¸®å°ä¼™ä¼´ä»¬èººå‘ä»¥ä¸‹ï¼Œè®°å½•è®°å½•ã€‚

é…ç½®å®Œï¼Œå°±è§‰å¾—è¿™å›èƒ½å¤ŸpingåŒå•¦ï¼Œé‡å¯ç½‘å¡åï¼Œpingä¸€ä¸‹~ğŸ˜…

![1649949030321](Images/1649949030321.png)

æ¥ä¸‹æ¥æ£€æŸ¥äº†windowsä¸ŠVMnet8é…ç½®è®¾ç½®ï¼Œæ£€æŸ¥å®Œåé—®é¢˜ä¸å‡ºåœ¨è¿™ã€‚éšåå°†è™šæ‹Ÿæœºå…³é—­ï¼Œé‡æ–°ç”Ÿæˆæ–°çš„MACåœ°å€ï¼Œè¿›è¡Œæ›´æ”¹ï¼Œå‘ç°IPåœ°å€ä¸å¯¹åŠ²ã€‚ã€‚æŸ¥çœ‹è™šæ‹Ÿç½‘ç»œè®¾ç½®åéƒ½æ˜¯192......110ğŸ˜…ï¼Œéšåè¿›è¡Œæ›´æ¢

![1649950147225](Images/1649950147225.png)

ç½‘ä¸ŠæŸ¥äº†å¾ˆå¤šé—®é¢˜è§£å†³åŠæ³•ï¼Œä½†æ˜¯æ²¡ç”¨ï¼Œåªå¥½æ’æŸ¥é…ç½®æ–‡ä»¶ï¼Œå•è¯æ˜¯å¦æ‹¼å†™é”™è¯¯ï¼Œå¥½å®¶ä¼™ï¼é—®é¢˜å°±åœ¨è¿™ğŸ¤£

![1649950345647](Images/1649950345647.png)

ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œé‡å¯ç½‘ç»œ service network restart ï¼Œæœ€å**ping**ä¸€ä¸‹

![1649950463844](Images/1649950463844.png)

å¥½äº†ï¼Œbugä¹Ÿè§£å†³å•¦ï¼Œæ¥ä¸‹æ¥è¯´è¯´ç½‘ç»œé…ç½®æ—¶å‡ºç°é—®é¢˜å¦‚ä½•æ’æŸ¥ï¼š

1.é¦–å…ˆéœ€è¦å¯¹windowsä¸ŠVMnet8å±æ€§é…ç½®è¿›è¡Œæ£€æŸ¥

2.æŸ¥çœ‹è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®ï¼ŒVMnetæ˜¯å¦ä¼šè‡ªåŠ¨è¿æ¥ï¼Œå¯¼è‡´NATè®¾ç½®æ˜¯å¦æ— æ•ˆï¼Œæˆ‘çš„å¤„ç†æ–¹å¼æ˜¯ç›´æ¥åˆ æ‰

3.å…³é—­è™šæ‹Ÿæœºï¼Œé‡å¯ç”ŸæˆMACåœ°å€ï¼Œè¿›è¡Œæ›´æ¢ï¼ŒåŒæ—¶ä¹Ÿæ›´æ¢ä¸€ä¸‹IPåœ°å€ï¼Œæœ€åé‡å¯ç½‘ç»œOK

15ã€æŸ¥çœ‹DNSæ˜¯å¦é…ç½®å¥½

```shell
# æŸ¥çœ‹æ˜¯å¦é…ç½®å¥½DNS
vi /etc/resolv.conf
```

![1649950921686](Images/1649950921686.png)

16ã€é…ç½®YUMæ¸…åé•œåƒ

```shell
# è¿›å…¥YUMé…ç½®æ–‡ä»¶ç›®å½•
cd /etc/yum.repos.d

# å¤åˆ¶CentOS-Base.repoä¸ºCenOS-Base.repo.back(å¤‡ä»½)
cp CentOS-Base.repo  CentOS-Base.repo.back

# ç¼–è¾‘CentOS-Base.repoï¼Œæ·»åŠ ä¸‹æ–‡é…ç½®æ–‡ä»¶
vi CentOS-Base.repo 
```

```xml
#CentOS-Base.repo

#The mirror system uses the connecting IP address of the client and thed

#update status of each mirror to pick mirrors that are updated to and

#geographically close to the client.  You should use this for CentOS updates

#unless you are manually picking other mirrors.

#If the mirrorlist= does not work for you, as a fall back you can try the

#remarked out baseurl= line instead.

[base]
name=CentOS-$releasever - Base
baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os
enabled=1
gpgcheck=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-7

#released updates
[updates]
name=CentOS-$releasever - Updates
baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/updates/$basearch/
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates
enabled=1
gpgcheck=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-7



#additional packages that may be useful
[extras]
name=CentOS-$releasever - Extras
baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/extras/$basearch/
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras
enabled=1
gpgcheck=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-7



#additional packages that extend functionality of existing packages
[centosplus]
name=CentOS-$releasever - Plus
baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/centosplus/$basearch/
#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus
gpgcheck=0
enabled=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-7
```

æ¸…é™¤æ‰€ä»¥ç¼“å­˜

```shell
yum clean all
```

å»ºç«‹ç¼“å­˜

```shell
yum makecache
```

![1649951599072](Images/1649951599072.png)

æ›´æ–°

```shell
yum update
```

17ã€å› ä¸ºä½¿ç”¨çš„æ˜¯CentOSç²¾ç®€ç‰ˆï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸‹é¢è½¯ä»¶

```shell
#å®‰è£…å‘½ä»¤
yum install -y epel-release

# å®‰è£… net-toolï¼Œå·¥å…·åŒ…é›†åˆï¼ŒåŒ…å«ifconfigç­‰å‘½ä»¤
yum install -y net-tools

# å®‰è£…vimï¼Œç¼–è¾‘å™¨
yum install -y vim

# æ—¶é—´åŒæ­¥
yum -y install ntpdate 
ntpdate ntp4.aliyun.com
```
